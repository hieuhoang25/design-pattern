# Design Patterns 
## 1. Design Patterns lÃ  gÃ¬?
Design Patterns (máº«u thiáº¿t káº¿) lÃ  má»™t ká»¹ thuáº­t trong láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, nÃ³ khÃ¡ quan trá»ng vÃ  má»i láº­p trÃ¬nh viÃªn muá»‘n giá»i Ä‘á»u pháº£i biáº¿t. Design Pattern Ä‘Æ°á»£c sá»­ dá»¥ng thÆ°á»ng xuyÃªn trong cÃ¡c ngÃ´n ngá»¯ OOP. NÃ³ cung cáº¥p cho báº¡n cÃ¡c â€œmáº«u thiáº¿t káº¿â€, giáº£i phÃ¡p Ä‘á»ƒ giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» chung, thÆ°á»ng gáº·p trong láº­p trÃ¬nh. CÃ¡c váº¥n Ä‘á» mÃ  báº¡n gáº·p pháº£i cÃ³ thá»ƒ báº¡n sáº½ tá»± nghÄ© ra cÃ¡ch giáº£i quyáº¿t nhÆ°ng cÃ³ thá»ƒ nÃ³ chÆ°a pháº£i lÃ  tá»‘i Æ°u. Design Pattern giÃºp báº¡n giáº£i quyáº¿t váº¥n Ä‘á» má»™t cÃ¡ch tá»‘i Æ°u nháº¥t, cung cáº¥p cho báº¡n cÃ¡c giáº£i phÃ¡p trong láº­p trÃ¬nh OOP.
## 2. Táº¡i sao pháº£i sá»­ dá»¥ng Design Patterns?
Design Pattern giÃºp báº¡n tÃ¡i sá»­ dá»¥ng mÃ£ lá»‡nh vÃ  dáº½ dÃ ng má»Ÿ rá»™ng.

NÃ³ lÃ  táº­p hÆ¡n nhá»¯ng giáº£i phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a, Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng Ä‘á»ƒ giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» trong software engineering. Váº­y khi báº¡n gáº·p báº¥t ká»³ khÃ³ khÄƒn gÃ¬, design patterns lÃ  kim chá»‰ nam giÃºp báº¡n giáº£i quyáº¿t váº¥n Ä‘á» thay vÃ¬ tá»± tÃ¬m kiáº¿m giáº£i phÃ¡p cho má»™t váº¥n Ä‘á» Ä‘Ã£ Ä‘Æ°á»£c chá»©ng minh.

Design pattern cung cáº¥p giáº£i phÃ¡p á»Ÿ dáº¡ng tá»•ng quÃ¡t, giÃºp tÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn pháº§n má»m báº±ng cÃ¡ch Ä‘Æ°a ra cÃ¡c mÃ´ hÃ¬nh test, mÃ´ hÃ¬nh phÃ¡t triá»ƒn Ä‘Ã£ qua kiá»ƒm nghiá»‡m.

DÃ¹ng láº¡i cÃ¡c design pattern giÃºp trÃ¡nh Ä‘Æ°á»£c cÃ¡c váº¥n Ä‘á» tiá»m áº©n cÃ³ thá»ƒ gÃ¢y ra nhá»¯ng lá»—i lá»›n, dá»… dÃ ng nÃ¢ng cáº¥p, báº£o trÃ¬ vá» sau.

GiÃºp cho cÃ¡c láº­p trÃ¬nh viÃªn cÃ³ thá»ƒ hiá»ƒu code cá»§a ngÆ°á»i khÃ¡c 1 cÃ¡ch nhanh chÃ³ng (cÃ³ thá»ƒ hiá»ƒu lÃ  tÃ­nh communicate). Má»i thÃ nh viÃªn trong team cÃ³ thá»ƒ dá»… dÃ ng trao Ä‘á»•i vá»›i nhau Ä‘á»ƒ cÃ¹ng xÃ¢y dá»±ng dá»± Ã¡n mÃ  khÃ´ng máº¥t quÃ¡ nhiá»u thá»i gian.
## 3. Khi nÃ o nÃªn sá»­ dá»¥ng Design patterns?
Khi báº¡n muá»‘n giá»¯ cho chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh thá»±c sá»± Ä‘Æ¡n giáº£n. Viá»‡c sá»­ dá»¥ng cÃ¡c design pattern sáº½ giÃºp chÃºng ta giáº£m Ä‘Æ°á»£c thá»i gian vÃ  cÃ´ng sá»©c suy nghÄ© ra cÃ¡c cÃ¡ch giáº£i quyáº¿t cho nhá»¯ng váº¥n Ä‘á» Ä‘Ã£ cÃ³ lá»i giáº£i.
## 4. PhÃ¢n loáº¡i Design Patterns
![Alt text](https://gpcoder.com/wp-content/uploads/2018/08/design-patterns-classify.png)
Chia lÃ m 3 nhÃ³m:
- Creational Pattern (nhÃ³m khá»Ÿi táº¡o â€“ 5 máº«u) gá»“m: Factory Method, Abstract Factory, Builder, Prototype, Singleton. Nhá»¯ng Design pattern loáº¡i nÃ y cung cáº¥p má»™t giáº£i phÃ¡p Ä‘á»ƒ táº¡o ra cÃ¡c object vÃ  che giáº¥u Ä‘Æ°á»£c logic cá»§a viá»‡c táº¡o ra nÃ³, thay vÃ¬ táº¡o ra object má»™t cÃ¡ch trá»±c tiáº¿p báº±ng cÃ¡ch sá»­ dá»¥ng method new. Äiá»u nÃ y giÃºp cho chÆ°Æ¡ng trÃ¬nh trá»Ÿ nÃªn má»m dáº»o hÆ¡n trong viá»‡c quyáº¿t Ä‘á»‹nh object nÃ o cáº§n Ä‘Æ°á»£c táº¡o ra trong nhá»¯ng tÃ¬nh huá»‘ng Ä‘Æ°á»£c Ä‘Æ°a ra.
- Structural Pattern (nhÃ³m cáº¥u trÃºc â€“ 7 máº«u) gá»“m: Adapter, Bridge, Composite, Decorator, Facade, Flyweight vÃ  Proxy. Nhá»¯ng Design pattern loáº¡i nÃ y liÃªn quan tá»›i class vÃ  cÃ¡c thÃ nh pháº§n cá»§a object. NÃ³ dÃ¹ng Ä‘á»ƒ thiáº¿t láº­p, Ä‘á»‹nh nghÄ©a quan há»‡ giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng.
- Behavioral Pattern (nhÃ³m tÆ°Æ¡ng tÃ¡c/ hÃ nh vi â€“ 11 máº«u) gá»“m: Interpreter, Template Method, Chain of Responsibility, Command, Iterator, Mediator, Memento, Observer, State, Strategy vÃ  Visitor. NhÃ³m nÃ y dÃ¹ng trong thá»±c hiá»‡n cÃ¡c hÃ nh vi cá»§a Ä‘á»‘i tÆ°á»£ng, sá»± giao tiáº¿p giá»¯a cÃ¡c object vá»›i nhau.
- HÃ¬nh dÆ°á»›i lÃ  má»‘i quan há»‡ giá»¯a 23 Design Pattern cÆ¡ báº£n (GoF):
![Alt text](https://gpcoder.com/wp-content/uploads/2018/07/design-patterns-relationship.jpg)
### 4.1 NhÃ³m Creational (nhÃ³m khá»Ÿi táº¡o)
![Alt text](https://gpcoder.com/wp-content/uploads/2018/08/Creational.png)
1. Singleton:
- [Root](https://gpcoder.com/4190-huong-dan-java-design-pattern-singleton/)
- Äáº£m báº£o 1 class chá»‰ cÃ³ 1 instance vÃ  cung cáº¥p 1 Ä‘iá»ƒm truy xuáº¥t toÃ n cá»¥c Ä‘áº¿n nÃ³.
- Táº§n suáº¥t sá»­ dá»¥ng: cao trung bÃ¬nh.
- Implement Singleton Pattern nhÆ° tháº¿ nÃ o:
  - private constructor Ä‘á»ƒ háº¡n cháº¿ truy cáº­p tá»« class bÃªn ngoÃ i.
  - Äáº·t private static final variable Ä‘áº£m báº£o biáº¿n chá»‰ Ä‘Æ°á»£c khá»Ÿi táº¡o trong class.
  - CÃ³ má»™t method public static Ä‘á»ƒ return instance Ä‘Æ°á»£c khá»Ÿi táº¡o á»Ÿ trÃªn.
- Nhá»¯ng cÃ¡ch nÃ o Ä‘á»ƒ implement Singleton Pattern
  - Eager initialization : Singleton Class Ä‘Æ°á»£c khá»Ÿi táº¡o ngay khi Ä‘Æ°á»£c gá»i Ä‘áº¿n. ÄÃ¢y lÃ  cÃ¡ch dá»… nháº¥t nhÆ°ng nÃ³ cÃ³ má»™t nhÆ°á»£c Ä‘iá»ƒm máº·c dÃ¹ instance Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o mÃ  cÃ³ thá»ƒ sáº½ khÃ´ng dÃ¹ng tá»›i. Eager initialization lÃ  cÃ¡ch tiáº¿p cáº­n tá»‘t, dá»… cÃ i Ä‘áº·t, tuy nhiÃªn, nÃ³ dá»… dÃ ng bá»‹ phÃ¡ vá»¡ bá»Ÿi Reflection.
  - Static block initialization : CÃ¡ch lÃ m tÆ°Æ¡ng tá»± nhÆ° Eager initialization chá»‰ khÃ¡c pháº§n static block cung cáº¥p thÃªm lá»±a chá»n cho viá»‡c handle exception hay cÃ¡c xá»­ lÃ½ khÃ¡c.
  - Lazy Initialization : LÃ  má»™t cÃ¡ch lÃ m mang tÃ­nh má»Ÿ rá»™ng hÆ¡n so vá»›i 2 cÃ¡ch lÃ m trÃªn vÃ  hoáº¡t Ä‘á»™ng tá»‘t trong mÃ´i trÆ°á»ng Ä‘Æ¡n luá»“ng (single-thread).CaÌch naÌ€y Ä‘aÌƒ khÄƒÌc phuÌ£c Ä‘Æ°Æ¡Ì£c nhÆ°Æ¡Ì£c Ä‘iÃªÌ‰m cuÌ‰a caÌch Eager initialization, chiÌ‰ khi naÌ€o getInstance() Ä‘Æ°Æ¡Ì£c goÌ£i thiÌ€ instance mÆ¡Ìi Ä‘Æ°Æ¡Ì£c khÆ¡Ì‰i taÌ£o. Tuy nhiÃªn, caÌch naÌ€y chiÌ‰ sÆ°Ì‰ duÌ£ng tÃ´Ìt trong trÆ°Æ¡Ì€ng hÆ¡Ì£p Ä‘Æ¡n luÃ´Ì€ng (single-thread), trÆ°Æ¡Ì€ng hÆ¡Ì£p nÃªÌu coÌ nhiá»u luÃ´Ì€ng (multi-thread) cuÌ€ng chaÌ£y vaÌ€ cuÌ€ng goÌ£i haÌ€m getInstance() taÌ£i cuÌ€ng mÃ´Ì£t thÆ¡Ì€i Ä‘iÃªÌ‰m thiÌ€ cÃ³ thá»ƒ cÃ³ nhiá»u hÆ¡n 1 thÃªÌ‰ hiÃªÌ£n cuÌ‰a instance. Äá»ƒ kháº¯c phá»¥c nhÆ°á»£c Ä‘iá»ƒm nÃ y chÃºng ta sá»­ dá»¥ng Thread Safe Singleton. Má»™t nhÆ°á»£c Ä‘iá»ƒm ná»¯a cá»§a Lazy Initialization cáº§n quan tÃ¢m lÃ : Ä‘á»‘i vá»›i thao tÃ¡c create instance quÃ¡ cháº­m thÃ¬ ngÆ°á»i dÃ¹ng cÃ³ pháº£i chá» lÃ¢u cho láº§n sá»­ dá»¥ng Ä‘áº§u tiÃªn.
  - Thread Safe Singleton : CaÌch Ä‘Æ¡n giaÌ‰n nhÃ¢Ìt laÌ€ chuÌng ta goÌ£i phÆ°Æ¡ng thÆ°Ìc synchronized cuÌ‰a haÌ€m getInstance() vaÌ€ nhÆ° vÃ¢Ì£y hÃªÌ£ thÃ´Ìng Ä‘aÌ‰m baÌ‰o rÄƒÌ€ng taÌ£i cuÌ€ng mÃ´Ì£t thÆ¡Ì€i Ä‘iÃªÌ‰m chiÌ‰ coÌ thÃªÌ‰ coÌ 1 luÃ´Ì€ng coÌ thÃªÌ‰ truy cÃ¢Ì£p vaÌ€o haÌ€m getInstance() vaÌ€ Ä‘aÌ‰m baÌ‰o rÄƒÌ€ng chiÌ‰ coÌ duy nhÃ¢Ìt 1 thÃªÌ‰ hiÃªÌ£n cuÌ‰a class. CÃ¡ch nÃ y cÃ³ nhÆ°á»£c Ä‘iá»ƒm lÃ  mÃ´Ì£t phÆ°Æ¡ng thá»©c synchronized seÌƒ chaÌ£y rÃ¢Ìt chÃ¢Ì£m vaÌ€ tÃ´Ìn hiÃªÌ£u nÄƒng, báº¥t ká»³ Thread nÃ o gá»i Ä‘áº¿n Ä‘á»u pháº£i chá» náº¿u cÃ³ má»™t Thread khÃ¡c Ä‘ang sá»­ dá»¥ng. CÃ³ nhá»¯ng tÃ¡c vá»¥ xá»­ lÃ½ trÆ°á»›c vÃ  sau khi táº¡o thá»ƒ hiá»‡n khÃ´ng cáº§n thiáº¿t pháº£i block. ViÌ€ vÃ¢Ì£y chuÌng ta cÃ¢Ì€n caÌ‰i tiÃªÌn noÌ Ä‘i 1 chuÌt vá»›i Double Check Locking Singleton.
  - Double Check Locking Singleton : Äá»ƒ implement theo cÃ¡ch nÃ y, chÃºng ta sáº½ kiá»ƒm tra sá»± tá»“n táº¡i thá»ƒ hiá»‡n cá»§a lá»›p, vá»›i sá»± há»• trá»£ cá»§a Ä‘á»“ng bá»™ hÃ³a, hai láº§n trÆ°á»›c khi khá»Ÿi táº¡o. Pháº£i khai bÃ¡o volatile cho instance Ä‘á»ƒ trÃ¡nh lá»›p lÃ m viá»‡c khÃ´ng chÃ­nh xÃ¡c do quÃ¡ trÃ¬nh tá»‘i Æ°u hÃ³a cá»§a trÃ¬nh biÃªn dá»‹ch.
  - Bill Pugh Singleton Implementation: Vá»›i cÃ¡ch lÃ m nÃ y báº¡n sáº½ táº¡o ra static nested class vá»›i vai trÃ² 1 Helper khi muá»‘n tÃ¡ch biá»‡t chá»©c nÄƒng cho 1 class function rÃµ rÃ ng hÆ¡n. ÄÃ¢y lÃ  cÃ¡ch thÆ°á»ng hay Ä‘Æ°á»£c sá»­ dá»¥ng vÃ  cÃ³ hiá»‡u suáº¥t tá»‘t (theo cÃ¡c chuyÃªn gia Ä‘Ã¡nh giÃ¡ ğŸ™‚ ). Khi Singleton Ä‘Æ°á»£c táº£i vÃ o bá»™ nhá»› thÃ¬ SingletonHelper chÆ°a Ä‘Æ°á»£c táº£i vÃ o. NÃ³ chá»‰ Ä‘Æ°á»£c táº£i khi vÃ  chá»‰ khi phÆ°Æ¡ng thá»©c getInstance() Ä‘Æ°á»£c gá»i. Vá»›i cÃ¡ch nÃ y trÃ¡nh Ä‘Æ°á»£c lá»—i cÆ¡ cháº¿ khá»Ÿi táº¡o instance cá»§a Singleton trong Multi-Thread, performance cao do tÃ¡ch biá»‡t Ä‘Æ°á»£c quÃ¡ trÃ¬nh xá»­ lÃ½. Do Ä‘Ã³, cÃ¡ch lÃ m nÃ y Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ lÃ  cÃ¡ch triá»ƒn khai Singleton nhanh vÃ  hiá»‡u quáº£ nháº¥t.
  - Enum Singleton : Khi dÃ¹ng enum thÃ¬ cÃ¡c params chá»‰ Ä‘Æ°á»£c khá»Ÿi táº¡o 1 láº§n duy nháº¥t, Ä‘Ã¢y cÅ©ng lÃ  cÃ¡ch giÃºp báº¡n táº¡o ra Singleton instance. Enum cÃ³ thá»ƒ sá»­ dá»¥ng nhÆ° má»™t Singleton, nhÆ°ng nÃ³ cÃ³ nhÆ°á»£c Ä‘iá»ƒm lÃ  khÃ´ng thá»ƒ extends tá»« má»™t lá»›p Ä‘Æ°á»£c, nÃªn khi sá»­ dá»¥ng cáº§n xem xÃ©t váº¥n Ä‘á» nÃ y.
    HÃ m constructor cá»§a enum lÃ  lazy, nghÄ©a lÃ  khi Ä‘Æ°á»£c sá»­ dá»¥ng má»›i cháº¡y hÃ m khá»Ÿi táº¡o vÃ  nÃ³ chá»‰ cháº¡y duy nháº¥t má»™t láº§n. Náº¿u muá»‘n sá»­ dá»¥ng nhÆ° má»™t eager singleton thÃ¬ cáº§n gá»i thá»±c thi trong má»™t static block khi start chÆ°Æ¡ng trÃ¬nh. So sÃ¡nh giá»¯a 2 cÃ¡ch sá»­ dá»¥ng enum initialization vÃ  static block initialization method, enum cÃ³ má»™t Ä‘iá»ƒm ráº¥t máº¡nh khi giáº£i quyáº¿t vá» váº¥n Ä‘á» Serialization/ Deserialization.
  - Serialization and Singleton: ÄÃ´i khi trong cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ¡n (distributed system), chÃºng ta cáº§n implement interface Serializable trong lá»›p Singleton Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ lÆ°u trá»¯ tráº¡ng thÃ¡i cá»§a nÃ³ trong file há»‡ thá»‘ng vÃ  truy xuáº¥t láº¡i nÃ³ sau.
- Sá»­ dá»¥ng Singleton Pattern khi nÃ o? : 
  - VÃ¬ class dÃ¹ng Singleton chá»‰ tá»“n táº¡i 1 Instance (thá»ƒ hiá»‡n) nÃªn nÃ³ thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng cho cÃ¡c trÆ°á»ng há»£p giáº£i quyáº¿t cÃ¡c bÃ i toÃ¡n cáº§n truy cáº­p vÃ o cÃ¡c á»©ng dá»¥ng nhÆ°: Shared resource, Logger, Configuration, Caching, Thread pool, â€¦
  - Má»™t sá»‘ design pattern khÃ¡c cÅ©ng sá»­ dá»¥ng Singleton Ä‘á»ƒ triá»ƒn khai: Abstract Factory, Builder, Prototype, Facade,â€¦
  - ÄÃ£ Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t sá»‘ class cá»§a core java nhÆ°: java.lang.Runtime, java.awt.Desktop.
2. Abstract Factory:
- Cung cáº¥p má»™t interface cho viá»‡c táº¡o láº­p cÃ¡c Ä‘á»‘i tÆ°á»£ng (cÃ³ liÃªn há»‡ vá»›i nhau) mÃ  khÃ´ng cáº§n qui Ä‘á»‹nh lá»›p khi hay xÃ¡c Ä‘á»‹nh lá»›p cá»¥ thá»ƒ (concrete) táº¡o má»—i Ä‘á»‘i tÆ°á»£ng.
- Táº§n suáº¥t sá»­ dá»¥ng: cao.
-  phÆ°Æ¡ng phÃ¡p táº¡o ra má»™t Super-factory dÃ¹ng Ä‘á»ƒ táº¡o ra cÃ¡c Factory khÃ¡c. Hay cÃ²n Ä‘Æ°á»£c gá»i lÃ  Factory cá»§a cÃ¡c Factory. Abstract Factory Pattern lÃ  má»™t Pattern cáº¥p cao hÆ¡n so vá»›i Factory Method Pattern. Trong Abstract Factory pattern, má»™t interface cÃ³ nhiá»‡m vá»¥ táº¡o ra má»™t Factory cá»§a cÃ¡c object cÃ³ liÃªn quan tá»›i nhau mÃ  khÃ´ng cáº§n pháº£i chá»‰ ra trá»±c tiáº¿p cÃ¡c class cá»§a object. Má»—i Factory Ä‘Æ°á»£c táº¡o ra cÃ³ thá»ƒ táº¡o ra cÃ¡c object báº±ng phÆ°Æ¡ng phÃ¡p giá»‘ng nhÆ° Factory pattern. HÃ£y tÆ°á»Ÿng tÆ°á»£ng, Abstract factory nhÆ° lÃ  má»™t nhÃ  mÃ¡y lá»›n chá»©a nhiá»u nhÃ  mÃ¡y nhá», trong cÃ¡c nhÃ  mÃ¡y Ä‘Ã³ cÃ³ nhá»¯ng xÆ°á»Ÿng sáº£n xuáº¥t, cÃ¡c xÆ°á»Ÿng Ä‘Ã³ táº¡o ra nhá»¯ng sáº£n pháº©m khÃ¡c nhau.
- CÃ i Ä‘áº·t Abstract Factory Pattern nhÆ° tháº¿ nÃ o?
  - AbstractFactory: Khai bÃ¡o dáº¡ng interface hoáº·c abstract class chá»©a cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng abstract.
  - ConcreteFactory: XÃ¢y dá»±ng, cÃ i Ä‘áº·t cÃ¡c phÆ°Æ¡ng thá»©c táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ.
  - AbstractProduct: Khai bÃ¡o dáº¡ng interface hoáº·c abstract class Ä‘á»ƒ Ä‘á»‹nh nghÄ©a Ä‘á»‘i tÆ°á»£ng abstract.
  - Product: CÃ i Ä‘áº·t cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ, cÃ i Ä‘áº·t cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c quy Ä‘á»‹nh táº¡i AbstractProduct.
  - Client: lÃ  Ä‘á»‘i tÆ°á»£ng sá»­ dá»¥ng AbstractFactory vÃ  cÃ¡c AbstractProduct.
- VÃ­ dá»¥:
Má»™t cÃ´ng ty Ä‘á»“ ná»™i tháº¥t chuyÃªn sáº£n xuáº¥t gháº¿ (Chair): gháº¿ nhá»±a (PlasticChair) vÃ  gháº¿ gá»— (WoodChair). Vá»›i tÃ¬nh hÃ¬nh kinh doanh ngÃ y cÃ ng thuáº­n thá»£i nÃªn cÃ´ng ty quyáº¿t Ä‘á»‹nh má»Ÿ rá»™ng thÃªm sáº£n xuáº¥t bÃ n (Table). Vá»›i lá»£i tháº¿ lÃ  Ä‘Ã£ cÃ³ kinh nghiá»‡m tá»« sáº£n xuáº¥t gháº¿ nÃªn cÃ´ng ty váº«n giá»¯ cháº¥t liá»‡u lÃ  nhá»±a (PlasticTable) vÃ  gá»— (WoodTable) cho sáº£n xuáº¥t bÃ n. Tuy nhiÃªn, quy trÃ¬nh sáº£n xuáº¥t gháº¿/ bÃ n theo tá»«ng cháº¥t liá»‡u (MaterialType) lÃ  khÃ¡c nhau. NÃªn cÃ´ng ty tÃ¡ch ra lÃ  nhÃ  mÃ¡y (Factory): 1 cho sáº£n xuáº¥t váº­t liá»‡u báº±ng nhá»±a (PlasticFactory), 1 cho sáº£n xuáº¥t váº­t liá»‡u báº±ng gá»— (WoodFactory), nhÆ°ng cáº£ 2 Ä‘á»u cÃ³ thá»ƒ sáº£n xuáº¥t gháº¿ vÃ  bÃ n (FunitureAbstractFactory). Khi khÃ¡ch hÃ ng cáº§n mua má»™t mÃ³n Ä‘á»“ nÃ o, khÃ¡ch hÃ ng (Client) chá»‰ cáº§n Ä‘áº¿n cá»­a hÃ ng Ä‘á»ƒ mua (FunitureFactory). Khi Ä‘Ã³ á»©ng vá»›i tá»«ng hÃ ng hÃ³a vÃ  váº­t liá»‡u sáº½ Ä‘Æ°á»£c chuyá»ƒn vá» phÃ¢n xÆ°á»Ÿng tÆ°Æ¡ng á»©ng Ä‘á»ƒ sáº£n xuáº¥t (createXXX) ra bÃ n (Table) vÃ  gháº¿ (Chair).
![Alt text](https://gpcoder.com/wp-content/uploads/2018/09/design-patterns-abstract-factory-diagram.png)
- Lá»£i Ã­ch cá»§a Abstract Factory Pattern lÃ  gÃ¬?
  - CÃ¡c lá»£i Ã­ch cá»§a Factory Pattern cÅ©ng tÆ°Æ¡ng tá»± nhÆ° Factory Method Pattern nhÆ°: cung cáº¥p hÆ°á»›ng tiáº¿p cáº­n vá»›i Interface thay thÃ¬ cÃ¡c implement, che giáº¥u sá»± phá»©c táº¡p cá»§a viá»‡c khá»Ÿi táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng vá»›i ngÆ°á»i dÃ¹ng (client), Ä‘á»™c láº­p giá»¯a viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng vÃ  há»‡ thá»‘ng sá»­ dá»¥ng, â€¦
  - GiÃºp trÃ¡nh Ä‘Æ°á»£c viá»‡c sá»­ dá»¥ng Ä‘iá»u kiá»‡n logic bÃªn trong Factory Pattern. Khi má»™t Factory Method lá»›n (cÃ³ quÃ¡ nhiá»u sá»­ lÃ½ if-else hay switch-case), chÃºng ta nÃªn sá»­ dá»¥ng theo mÃ´ hÃ¬nh Abstract Factory Ä‘á»ƒ dá»… quáº£n lÃ½ hÆ¡n (cÃ¡ch phÃ¢n chia cÃ³ thá»ƒ lÃ  gom nhÃ³m cÃ¡c sub-class cÃ¹ng loáº¡i vÃ o má»™t Factory).
  - Abstract Factory Pattern lÃ  factory cá»§a cÃ¡c factory, cÃ³ thá»ƒ dá»… dáº¡ng má»Ÿ rá»™ng Ä‘á»ƒ chá»©a thÃªm cÃ¡c factory vÃ  cÃ¡c sub-class khÃ¡c.
  -  Dá»… dÃ ng xÃ¢y dá»±ng má»™t há»‡ thá»‘ng Ä‘Ã³ng gÃ³i (encapsulate): sá»­ dá»¥ng Ä‘Æ°á»£c vá»›i nhiá»u nhÃ³m Ä‘á»‘i tÆ°á»£ng (factory) vÃ  táº¡o nhiá»u product khÃ¡c nhau
3. Factory Method:
- Äá»‹nh nghÄ©a Interface Ä‘á»ƒ sinh ra Ä‘á»‘i tÆ°á»£ng nhÆ°ng Ä‘á»ƒ cho lá»›p con quyáº¿t Ä‘á»‹nh lá»›p nÃ o Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ sinh ra Ä‘á»‘i tÆ°á»£ng Factory method cho phÃ©p má»™t lá»›p chuyá»ƒn quÃ¡ trÃ¬nh khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng cho lá»›p con.
- Táº§n suáº¥t sá»­ dá»¥ng: cao.
- Nhiá»‡m vá»¥ cá»§a Factory Pattern lÃ  quáº£n lÃ½ vÃ  tráº£ vá» cÃ¡c Ä‘á»‘i tÆ°á»£ng theo yÃªu cáº§u, giÃºp cho viá»‡c khá»Ÿi táº¡o Ä‘á»•i tÆ°á»£ng má»™t cÃ¡ch linh hoáº¡t hÆ¡n.
- Factory Pattern Ä‘Ãºng nghÄ©a lÃ  má»™t nhÃ  mÃ¡y, vÃ  nhÃ  mÃ¡y nÃ y sáº½ â€œsáº£n xuáº¥tâ€ cÃ¡c Ä‘á»‘i tÆ°á»£ng theo yÃªu cáº§u cá»§a chÃºng ta.
- Trong Factory Pattern, chÃºng ta táº¡o Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng Ä‘á»ƒ lá»™ logic táº¡o Ä‘á»‘i tÆ°á»£ng á»Ÿ phÃ­a ngÆ°á»i dÃ¹ng vÃ  tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng má»›i Ä‘Æ°á»£c táº¡o ra báº±ng cÃ¡ch sá»­ dá»¥ng má»™t interface chung.
- Factory Pattern Ä‘Æ°á»£c sá»­ dá»¥ng khi cÃ³ má»™t class cha (super-class) vá»›i nhiá»u class con (sub-class), dá»±a trÃªn Ä‘áº§u vÃ o vÃ  pháº£i tráº£ vá» 1 trong nhá»¯ng class con Ä‘Ã³.
- CÃ i Ä‘áº·t Factory Pattern nhÆ° tháº¿ nÃ o?
  - Super Class: mÃ´t supper class trong Factory Pattern cÃ³ thá»ƒ lÃ  má»™t interface, abstract class hay má»™t class thÃ´ng thÆ°á»ng.
  - Sub Classes: cÃ¡c sub class sáº½ implement cÃ¡c phÆ°Æ¡ng thá»©c cá»§a supper class theo nghiá»‡p vá»¥ riÃªng cá»§a nÃ³.
  - Factory Class: má»™t class chá»‹u trÃ¡nh nhiá»‡m khá»Ÿi táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng sub class dá»±a theo tham sá»‘ Ä‘áº§u vÃ o. LÆ°u Ã½: lá»›p nÃ y lÃ  Singleton hoáº·c cung cáº¥p má»™t public static method cho viá»‡c truy xuáº¥t vÃ  khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng. Factory class sá»­ dá»¥ng if-else hoáº·c switch-case Ä‘á»ƒ xÃ¡c Ä‘á»‹nh class con Ä‘áº§u ra.
- VÃ­ dá»¥:
Táº¥t cáº£ há»‡ thá»‘ng ngÃ¢n hÃ ng cÃ³ cung cáº¥p API Ä‘á»ƒ truy cáº­p Ä‘áº¿n há»‡ thá»‘ng cá»§a há». Team Ä‘Æ°á»£c giao nhiá»‡m vá»¥ thiáº¿t káº¿ má»™t API Ä‘á»ƒ client cÃ³ thá»ƒ sá»­ dá»¥ng dá»‹ch vá»¥ cá»§a má»™t ngÃ¢n hÃ ng báº¥t ká»³. Hiá»‡n táº¡i, phÃ­a client chá»‰ cáº§n sá»­ dá»¥ng dá»‹ch vá»¥ cá»§a 2 ngÃ¢n hÃ ng lÃ  VietcomBank vÃ  TPBank. Tuy nhiÃªn Ä‘á»ƒ dá»… má»Ÿ rá»™ng sau nÃ y, vÃ  phÃ­a client mong muá»‘n khÃ´ng cáº§n pháº£i thay Ä‘á»•i code cá»§a há» khi cáº§n sá»­ dá»¥ng thÃªm dá»‹ch vá»¥ cá»§a ngÃ¢n hÃ ng khÃ¡c. Vá»›i yÃªu cáº§u nhÆ° váº­y, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng má»™t Pattern phÃ¹ há»£p lÃ  Factory Method Pattern.
![Alt text](https://gpcoder.com/wp-content/uploads/2018/09/design-patterns-factory-method-diagram.png)
- Sá»­ dá»¥ng Factory Pattern khi nÃ o?
  - ChÃºng ta cÃ³ má»™t super class vá»›i nhiá»u class con vÃ  dá»±a trÃªn Ä‘áº§u vÃ o, chÃºng ta cáº§n tráº£ vá» má»™t class con. MÃ´ hÃ¬nh nÃ y giÃºp chÃºng ta Ä‘Æ°a trÃ¡ch nhiá»‡m cá»§a viá»‡c khá»Ÿi táº¡o má»™t lá»›p tá»« phÃ­a ngÆ°á»i dÃ¹ng (client) sang lá»›p Factory.
  - ChÃºng ta khÃ´ng biáº¿t sau nÃ y sáº½ cáº§n Ä‘áº¿n nhá»¯ng lá»›p con nÃ o ná»¯a. Khi cáº§n má»Ÿ rá»™ng, hÃ£y táº¡o ra sub class vÃ  implement thÃªm vÃ o factory method cho viá»‡c khá»Ÿi táº¡o sub class nÃ y.
- Lá»£i Ã­ch cá»§a Factory Pattern lÃ  gÃ¬?
  - Factory Pattern giÃºp giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c module (loose coupling): cung cáº¥p 1 hÆ°á»›ng tiáº¿p cáº­n vá»›i Interface thay thÃ¬ cÃ¡c implement. GiÃºp chuÆ¡ng trÃ¬nh Ä‘á»™c láº­p vá»›i nhá»¯ng lá»›p cá»¥ thá»ƒ mÃ  chÃºng ta cáº§n táº¡o 1 Ä‘á»‘i tÆ°á»£ng, code á»Ÿ phÃ­a client khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng khi thay Ä‘á»•i logic á»Ÿ factory hay sub class.
  - Má»Ÿ rá»™ng code dá»… dÃ ng hÆ¡n: khi cáº§n má»Ÿ rá»™ng, chá»‰ viá»‡c táº¡o ra sub class vÃ  implement thÃªm vÃ o factory method.
  - Khá»Ÿi táº¡o cÃ¡c Objects mÃ  che giáº¥u Ä‘i xá»­ lÃ­ logic cá»§a viá»‡c khá»Ÿi táº¡o Ä‘áº¥y. NgÆ°á»i dÃ¹ng khÃ´ng biáº¿t logic thá»±c sá»±c Ä‘Æ°á»£c khá»Ÿi táº¡o bÃªn dÆ°á»›i phÆ°Æ¡ng thá»©c factory.
  - Dá»… dáº¡ng quáº£n lÃ½ life cycle cá»§a cÃ¡c Object Ä‘Æ°á»£c táº¡o bá»Ÿi Factory Pattern.
  - Thá»‘ng nháº¥t vá» naming convention: giÃºp cho cÃ¡c developer cÃ³ thá»ƒ hiá»ƒu vá» cáº¥u trÃºc source code.
4. Builder
- TÃ¡ch rá»i viá»‡c xÃ¢y dá»±ng (construction) má»™t Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p khá»i biá»ƒu diá»…n cá»§a nÃ³ sao cho cÃ¹ng má»™t tiáº¿n trÃ¬nh xÃ¢y dá»±ng cÃ³ thá»ƒ táº¡o Ä‘Æ°á»£c cÃ¡c biá»ƒu diá»…n khÃ¡c nhau.
- Táº§n suáº¥t sá»­ dá»¥ng: trung bÃ¬nh tháº¥p.
- CÃ i Ä‘áº·t Builder Pattern nhÆ° tháº¿ nÃ o?
![Alt text](https://gpcoder.com/wp-content/uploads/2018/09/design-patterns-builder-diagram.png)
  - Product : Ä‘áº¡i diá»‡n cho Ä‘á»‘i tÆ°á»£ng cáº§n táº¡o, Ä‘á»‘i tÆ°á»£ng nÃ y phá»©c táº¡p, cÃ³ nhiá»u thuá»™c tÃ­nh.
  - ConcreteBuilder : káº¿ thá»«a Builder vÃ  cÃ i Ä‘áº·t chi tiáº¿t cÃ¡ch táº¡o ra Ä‘á»‘i tÆ°á»£ng. NÃ³ sáº½ xÃ¡c Ä‘á»‹nh vÃ  náº¯m giá»¯ cÃ¡c thá»ƒ hiá»‡n mÃ  nÃ³ táº¡o ra, Ä‘á»“ng thá»i nÃ³ cÅ©ng cung cáº¥p phÆ°Æ¡ng thá»©c Ä‘á»ƒ tráº£ cÃ¡c cÃ¡c thá»ƒ hiá»‡n mÃ  nÃ³ Ä‘Ã£ táº¡o ra trÆ°á»›c Ä‘Ã³.
  - Director/ Client: lÃ  nÆ¡i sáº½ gá»i tá»›i Builder Ä‘á»ƒ táº¡o ra Ä‘á»‘i tÆ°á»£ng.
  - Builder : lÃ  abstract class hoáº·c interface khai bÃ¡o phÆ°Æ¡ng thá»©c táº¡o Ä‘á»‘i tÆ°á»£ng.
5. Prototype:
- [Reference](https://gpcoder.com/4413-huong-dan-java-design-pattern-prototype/)
- Qui Ä‘á»‹nh loáº¡i cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng cáº§n táº¡o báº±ng cÃ¡ch dÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng máº«u, táº¡o má»›i nhá» vÃ o sao chÃ©p Ä‘á»‘i tÆ°á»£ng máº«u nÃ y.
- Táº§n suáº¥t sá»­ dá»¥ng: trung bÃ¬nh.
- NÃ³ cÃ³ nhiá»‡m vá»¥ khá»Ÿi táº¡o má»™t Ä‘á»‘i tÆ°á»£ng báº±ng cÃ¡ch clone má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ tá»“n táº¡i thay vÃ¬ khá»Ÿi táº¡o vá»›i tá»« khoÃ¡ new. Äá»‘i tÆ°á»£ng má»›i lÃ  má»™t báº£n sao cÃ³ thá»ƒ giá»‘ng 100% vá»›i Ä‘á»‘i tÆ°á»£ng gá»‘c, chÃºng ta cÃ³ thá»ƒ thay Ä‘á»•i dá»¯ liá»‡u cá»§a nÃ³ mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng gá»‘c.
- Prototype Pattern Ä‘Æ°á»£c dÃ¹ng khi viá»‡c táº¡o má»™t object tá»‘n nhiá»u chi phÃ­ vÃ  thá»i gian trong khi báº¡n Ä‘Ã£ cÃ³ má»™t object tÆ°Æ¡ng tá»± tá»“n táº¡i.
- CÃ i Ä‘áº·t Prototype Pattern nhÆ° tháº¿ nÃ o?
![Alt text](https://gpcoder.com/wp-content/uploads/2018/09/design-patterns-prototype-diagram.png)
  - Prototype : khai bÃ¡o má»™t class, interface hoáº·c abtract class cho viá»‡c clone chÃ­nh nÃ³.
  - ConcretePrototype class : cÃ¡c lá»›p nÃ y thá»±c thi interface (hoáº·c káº¿ thá»«a tá»« lá»›p abstract) Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Prototype Ä‘á»ƒ copy (nhÃ¢n báº£n) chÃ­nh báº£n thÃ¢n nÃ³. CÃ¡c lá»›p nÃ y chÃ­nh lÃ  thá»ƒ hiá»‡n cá»¥ thá»ƒ phÆ°Æ¡ng thá»©c clone(). Lá»›p nÃ y cÃ³ thá»ƒ khÃ´ng cáº§n thiáº¿t náº¿u: Prototype lÃ  má»™t class vÃ  nÃ³ Ä‘Ã£ implement viá»‡c clone chÃ­nh nÃ³.
  - Client class : táº¡o má»›i object báº±ng cÃ¡ch gá»i Prototype thá»±c hiá»‡n clone chÃ­nh nÃ³.
- VÃ­ dá»¥ 1:
Má»™t cÃ´ng ty cÃ³ cáº¥u hÃ¬nh mÃ¡y tÃ­nh Ä‘á»u giá»‘ng nhau cho táº¥t cáº£ nhÃ¢n viÃªn, bao gá»“m: Há»‡ Ä‘iá»u hÃ nh (os), Pháº§n má»m vÄƒn phÃ²ng (office), Pháº§n má»m diá»‡t virus (antivirus), TrÃ¬nh duyá»‡t (Browser), vÃ  má»™t sá»‘ pháº§n má»m khÃ¡c (others) tÃ¹y theo nhu cáº§u cá»§a má»—i nhÃ¢n viÃªn sáº½ Ä‘Æ°á»£c cÃ i Ä‘áº·t thÃªm. Viá»‡c cÃ i Ä‘áº·t táº¥t cáº£ pháº§n má»m trÃªn ráº¥t tá»‘n thá»i gian, nÃªn anh IT Ä‘Ã£ nghÄ© ra má»™t cÃ¡ch lÃ  sáº½ táº¡o ra má»™t báº£n chuáº©n cho má»™t mÃ¡y tÃ­nh vÃ  cÃ³ thá»ƒ clone() láº¡i cáº¥u hÃ¬nh Ä‘Ã³ cho má»™t nhÃ¢n viÃªn khÃ¡c mÃ  khÃ´ng cáº§n pháº£i cÃ i Ä‘áº·t láº¡i tá»« Ä‘áº§u.
  - Äáº§u tiÃªn, chÃºng ta sáº½ táº¡o má»™t lá»›p Computer vÃ  implement tá»« interface Cloneable.
  - Tiáº¿p theo, chÃºng ta sáº½ táº¡o má»™t computer chuáº©n (instance).
  - Sau Ä‘Ã³, má»—i khi cÃ³ nhÃ¢n viÃªn má»›i, chá»‰ viá»‡c clone() tá»« computer chuáº©n Ä‘Ã£ táº¡o. TÃ¹y theo, nhu cáº§u cá»§a má»—i nhÃ¢n viÃªn cÃ³ thá»ƒ thay Ä‘á»•i láº¡i cho phÃ¹ há»£p (setOthers()).
- VÃ­ dá»¥ 2:
Má»™t bÃ n cá» vua gá»“m cÃ³: 8 hÃ ng (row) vÃ  8 cá»™t (column). TÆ°Æ¡ng á»©ng vá»›i hÃ ng vÃ  cá»™t lÃ  cÃ¡c Ã´ (cell) Ä‘Æ°á»£c tÃ´ mÃ u Ä‘en (black) vÃ  tráº¯ng (white). ChÃºng ta, hÃ£y xem cÃ¡c cÃ¡ch implement Ä‘á»ƒ váº½ bÃ n cá» vua nhÆ° sau:
- Lá»£i Ã­ch cá»§a Prototype Pattern lÃ  gÃ¬?
  - CÃ£i thiá»‡n performance: giáº£m chi phÃ­ Ä‘á»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i theo chuáº©n, Ä‘iá»u nÃ y sáº½ lÃ m tÄƒng hiá»‡u suáº¥t so vá»›i viá»‡c sá»­ dá»¥ng tá»« khÃ³a new Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng má»›i.
  - Giáº£m Ä‘á»™ phá»©c táº¡p cho viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng: do má»—i lá»›p chá»‰ implement cÃ¡ch clone cá»§a chÃ­nh nÃ³.
  - Giáº£m viá»‡c phÃ¢n lá»›p, trÃ¡nh viá»‡c táº¡o nhiá»u lá»›p con cho viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng nhÆ° cá»§a Abstract Factory Pattern.
  - Khá»Ÿi táº¡o object má»›i báº±ng cÃ¡ch thay Ä‘á»•i má»™t vÃ i thuá»™c tÃ­nh cá»§a object (cÃ¡c object cÃ³ Ã­t Ä‘iá»ƒm khÃ¡c biá»‡t nhau): Má»™t há»‡ thá»‘ng linh Ä‘á»™ng sáº½ Ä‘á»ƒ cho chÃºng ta tá»± Ä‘á»‹nh nghÄ©a má»™t hÃ nh Ä‘á»™ng nÃ o Ä‘Ã³ thÃ´ng qua sá»± káº¿t há»£p vá»›i má»™t object (nghÄ©a lÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a má»™t class) hÆ¡n lÃ  Ä‘á»‹nh nghÄ©a má»™t class má»›i.
  - Khá»Ÿi táº¡o object má»›i báº±ng cÃ¡ch thay Ä‘á»•i cáº¥u trÃºc: Ráº¥t nhiá»u á»©ng dá»¥ng xÃ¢y dá»±ng há»‡ thá»‘ng tá»« nhiá»u pháº§n vÃ  cÃ¡c pháº§n con. CÃ¡c pháº§n con láº¡i khá»Ÿi táº¡o tá»« nhiá»u pháº§n con khÃ¡c (chia nhá» bÃ i toÃ¡n). Prototype pattern cÅ©ng há»— trá»£ Ä‘iá»u nÃ y. NghÄ©a lÃ  cÃ¡c pháº§n Ä‘Ã³ cÃ³ thá»ƒ Ä‘Æ°á»£c khá»Ÿi táº¡o tá»« viá»‡c copy má»™t nguyÃªn máº«u tá»« má»™t â€œcáº¥u trÃºcâ€ khÃ¡c. Miá»…n lÃ  cÃ¡c pháº§n káº¿t há»£p Ä‘á»u thá»ƒ hiá»‡n clone() vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i cáº¥u trÃºc khÃ¡c nhau lÃ m nguyÃªn máº«u. Xem thÃªm vá» Object cloning trong java báº¡n sáº½ tháº¥y rÃµ Ä‘iá»u nÃ y.
- Sá»­ dá»¥ng Prototype khi nÃ o?
  - ChÃºng ta cÃ³ má»™t object vÃ  cáº§n pháº£i táº¡o 1 á»bject má»›i khÃ¡c dá»±a trÃªn object báº¡n Ä‘áº§u mÃ  khÃ´ng thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ new hay cÃ¡c hÃ m contructor Ä‘á»ƒ khá»Ÿi táº¡o. VÃ¬ sao váº­y? LÃ½ do Ä‘Æ¡n giáº£n lÃ  á»Ÿ Ä‘Ã¢y chÃºng ta ko há» Ä‘Æ°á»£c biáº¿t thÃ´ng tin ná»™i táº¡i cá»§a object Ä‘Ã³ hoáº·c object Ä‘Ã³ Ä‘Ã£ cÃ³ thá»ƒ bá»‹ che dáº¥u Ä‘i nhiá»u thÃ´ng tin khÃ¡c mÃ  chá»‰ cho ta má»™t thÃ´ng tin ráº¥t giá»›i háº¡n khÃ´ng Ä‘á»§ Ä‘á»ƒ hiá»ƒu Ä‘Æ°á»£c. Do váº­y ta ko thá»ƒ dÃ¹ng toÃ¡n tá»­ new Ä‘á»ƒ khá»Ÿi táº¡o nÃ³ Ä‘Æ°á»£c. Giáº£i phÃ¡p: Ä‘á»ƒ cho chÃ­nh object máº«u tá»± xÃ¡c Ä‘á»‹nh thÃ´ng tin vÃ  dá»¯ liá»‡u sao chÃ©p.
  - Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng lÃºc run-time: chÃºng ta cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ sáº½ Ä‘Æ°á»£c khá»Ÿi táº¡o lÃºc runtime náº¿u class Ä‘Æ°á»£c implement / extend tá»« má»™t Prototype.
  - Cáº¥u hÃ¬nh má»™t á»©ng dá»¥ng vá»›i dynamic class.
  - Muá»‘n truyá»n Ä‘á»‘i tÆ°á»£ng vÃ o má»™t hÃ m nÃ o Ä‘Ã³ Ä‘á»ƒ xá»­ lÃ½, thay vÃ¬ truyá»n Ä‘á»‘i tÆ°á»£ng gá»‘c cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng dá»¯ liá»‡u thÃ¬ ta cÃ³ thá»ƒ truyá»n Ä‘á»‘i tÆ°á»£ng sao chÃ©p.
  - Chi phÃ­ cá»§a viá»‡c táº¡o má»›i Ä‘á»‘i tÆ°á»£ng (báº±ng cÃ¡ch sá»­ dá»¥ng toÃ¡n tá»­ new) lÃ  lá»›n.
  - áº¨n Ä‘á»™ phá»©c táº¡p cá»§a viá»‡c khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng tá»« phÃ­a Client.
### 4.2 NhÃ³m Structural (nhÃ³m cáº¥u trÃºc)
1. Adapter
- Do váº¥n Ä‘á» tÆ°Æ¡ng thÃ­ch, thay Ä‘á»•i interface cá»§a má»™t lá»›p thÃ nh má»™t interface khÃ¡c phÃ¹ há»£p vá»›i yÃªu cáº§u ngÆ°á»i sá»­ dá»¥ng lá»›p.
- Táº§n suáº¥t sá»­ dá»¥ng: cao trung bÃ¬nh.
- Adapter Pattern cho phÃ©p cÃ¡c inteface (giao diá»‡n) khÃ´ng liÃªn quan tá»›i nhau cÃ³ thá»ƒ lÃ m viá»‡c cÃ¹ng nhau. Äá»‘i tÆ°á»£ng giÃºp káº¿t ná»‘i cÃ¡c interface gá»i lÃ  Adapter.
- Adapter Pattern giá»¯ vai trÃ² trung gian giá»¯a hai lá»›p, chuyá»ƒn Ä‘á»•i interface cá»§a má»™t hay nhiá»u lá»›p cÃ³ sáºµn thÃ nh má»™t interface khÃ¡c, thÃ­ch há»£p cho lá»›p Ä‘ang viáº¿t. Äiá»u nÃ y cho phÃ©p cÃ¡c lá»›p cÃ³ cÃ¡c interface khÃ¡c nhau cÃ³ thá»ƒ dá»… dÃ ng giao tiáº¿p tá»‘t vá»›i nhau thÃ´ng qua interface trung gian, khÃ´ng cáº§n thay Ä‘á»•i code cá»§a lá»›p cÃ³ sáºµn cÅ©ng nhÆ° lá»›p Ä‘ang viáº¿t.
![Alt text](https://gpcoder.com/wp-content/uploads/2018/10/adapter-pattern-example.jpg)
- Adapter Pattern cÃ²n gá»i lÃ  Wrapper Pattern do cung cáº¥p má»™t interface â€œbá»c ngoÃ iâ€ tÆ°Æ¡ng thÃ­ch cho má»™t há»‡ thá»‘ng cÃ³ sáºµn, cÃ³ dá»¯ liá»‡u vÃ  hÃ nh vi phÃ¹ há»£p nhÆ°ng cÃ³ interface khÃ´ng tÆ°Æ¡ng thÃ­ch vá»›i lá»›p Ä‘ang viáº¿t.
- CÃ i Ä‘áº·t Adapter Pattern nhÆ° tháº¿ nÃ o?
  - Adaptee: Ä‘á»‹nh nghÄ©a interface khÃ´ng tÆ°Æ¡ng thÃ­ch, cáº§n Ä‘Æ°á»£c tÃ­ch há»£p vÃ o.
  - Adapter: lá»›p tÃ­ch há»£p, giÃºp interface khÃ´ng tÆ°Æ¡ng thÃ­ch tÃ­ch há»£p Ä‘Æ°á»£c vá»›i interface Ä‘ang lÃ m viá»‡c. Thá»±c hiá»‡n viá»‡c chuyá»ƒn Ä‘á»•i interface cho Adaptee vÃ  káº¿t ná»‘i Adaptee vá»›i Client.
  - Target: má»™t interface chá»©a cÃ¡c chá»©c nÄƒng Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi Client (domain specific).
  - Client: lá»›p sá»­ dá»¥ng cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ interface Target.
- CÃ³ hai cÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Adapter Pattern dá»±a theo cÃ¡ch cÃ i Ä‘áº·t (implement) cá»§a chÃºng:
  - Object Adapter â€“ Composition (Chá»©a trong): trong mÃ´ hÃ¬nh nÃ y, má»™t lá»›p má»›i (Adapter) sáº½ tham chiáº¿u Ä‘áº¿n má»™t (hoáº·c nhiá»u) Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p cÃ³ sáºµn vá»›i interface khÃ´ng tÆ°Æ¡ng thÃ­ch (Adaptee), Ä‘á»“ng thá»i cÃ i Ä‘áº·t interface mÃ  ngÆ°á»i dÃ¹ng mong muá»‘n (Target). Trong lá»›p má»›i nÃ y, khi cÃ i Ä‘áº·t cÃ¡c phÆ°Æ¡ng thá»©c cá»§a interface ngÆ°á»i dÃ¹ng mong muá»‘n, sáº½ gá»i phÆ°Æ¡ng thá»©c cáº§n thiáº¿t thÃ´ng qua Ä‘á»‘i tÆ°á»£ng thuá»™c lá»›p cÃ³ interface khÃ´ng tÆ°Æ¡ng thÃ­ch.
![Alt text](https://gpcoder.com/wp-content/uploads/2018/10/design-patterns-object-adapter-diagram.png)
  - Class Adapter â€“ Inheritance (Káº¿ thá»«a) : trong mÃ´ hÃ¬nh nÃ y, má»™t lá»›p má»›i (Adapter) sáº½ káº¿ thá»«a lá»›p cÃ³ sáºµn vá»›i interface khÃ´ng tÆ°Æ¡ng thÃ­ch (Adaptee), Ä‘á»“ng thá»i cÃ i Ä‘áº·t interface mÃ  ngÆ°á»i dÃ¹ng mong muá»‘n (Target). Trong lá»›p má»›i, khi cÃ i Ä‘áº·t cÃ¡c phÆ°Æ¡ng thá»©c cá»§a interface ngÆ°á»i dÃ¹ng mong muá»‘n, phÆ°Æ¡ng thá»©c nÃ y sáº½ gá»i cÃ¡c phÆ°Æ¡ng thá»©c cáº§n thiáº¿t mÃ  nÃ³ thá»«a káº¿ Ä‘Æ°á»£c tá»« lá»›p cÃ³ interface khÃ´ng tÆ°Æ¡ng thÃ­ch.
![Alt text](https://gpcoder.com/wp-content/uploads/2018/10/design-patterns-class-adapter-diagram.png)
- So sÃ¡nh Class Adapter vá»›i Object Adapter:
  - Sá»± khÃ¡c biá»‡t chÃ­nh lÃ  Class Adapter sá»­ dá»¥ng Inheritance (káº¿ thá»«a) Ä‘á»ƒ káº¿t ná»‘i Adapter vÃ  Adaptee trong khi Object Adapter sá»­ dá»¥ng Composition (chá»©a trong) Ä‘á»ƒ káº¿t ná»‘i Adapter vÃ  Adaptee.
  - Trong cÃ¡ch tiáº¿p cáº­n Class Adapter, náº¿u má»™t Adaptee lÃ  má»™t class vÃ  khÃ´ng pháº£i lÃ  má»™t interface thÃ¬ Adapter sáº½ lÃ  má»™t lá»›p con cá»§a Adaptee. Do Ä‘Ã³, nÃ³ sáº½ khÃ´ng phá»¥c vá»¥ táº¥t cáº£ cÃ¡c lá»›p con khÃ¡c theo cÃ¹ng má»™t cÃ¡ch vÃ¬ Adapter lÃ  má»™t lá»›p phá»¥ cá»¥ thá»ƒ cá»§a Adaptee.
- Táº¡i sao Object Adapter láº¡i tá»‘t hÆ¡n?
  - NÃ³ sá»­ dá»¥ng Composition Ä‘á»ƒ giá»¯ má»™t thá»ƒ hiá»‡n cá»§a Adaptee, cho phÃ©p má»™t Adapter hoáº¡t Ä‘á»™ng vá»›i nhiá»u Adaptee náº¿u cáº§n thiáº¿t.
- VÃ­ dá»¥ Adapter Pattern vá»›i á»©ng dá»¥ng Translation
Má»™t ngÆ°á»i Viá»‡t muá»‘n trao Ä‘á»•i vá»›i má»™t ngÆ°á»i Nháº­t. Tuy nhiÃªn, 2 ngÆ°á»i nÃ y khÃ´ng biáº¿t ngÃ´n ngá»¯ cá»§a nhau nÃªn cáº§n pháº£i cÃ³ má»™t ngÆ°á»i Ä‘á»ƒ chuyá»ƒn Ä‘á»•i tá»« ngÃ´n ngá»¯ tiáº¿ng Viá»‡t sang ngÃ´n ngá»¯ tiáº¿ng Nháº­t. ChÃºng ta sáº½ mÃ´ hÃ¬nh hÃ³a trÆ°á»ng há»£p nÃ y vá»›i Adapter Pattern nhÆ° sau:
  - Client: ngÆ°á»i Viá»‡t sáº½ lÃ  Client trong vÃ­ dá»¥ nÃ y,vÃ¬ anh ta cáº§n gá»­i má»™t sá»‘ message cho ngÆ°á»i Nháº­t.
  - Target: Ä‘Ã¢y lÃ  ná»™i dung message Ä‘Æ°á»£c Client cung cáº¥p cho thÃ´ng dá»‹ch viÃªn (Translator / Adapter).
  - Adapter: thÃ´ng dá»‹ch viÃªn (Translator) sáº½ lÃ  Adapter, nháº­n message tiáº¿ng Viá»‡t tá»« Client vÃ  chuyá»ƒn Ä‘á»•i nÃ³ sang tiáº¿ng Nháº­t trÆ°á»›c khi gá»Ÿi cho ngÆ°á»i Nháº­t.
  - Adaptee: Ä‘Ã¢y lÃ  interface hoáº·c class Ä‘Æ°á»£c ngÆ°á»i Nháº­t sá»­ dá»¥ng Ä‘á»ƒ nháº­n message Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i tá»« thÃ´ng dá»‹ch viÃªn (Translator).
![Alt text](https://gpcoder.com/wp-content/uploads/2018/10/design-patterns-adapter-diagram-translator-example.png)
- Lá»£i Ã­ch cá»§a Adapter Pattern lÃ  gÃ¬?
  - Cho phÃ©p nhiá»u Ä‘á»‘i tÆ°á»£ng cÃ³ interface giao tiáº¿p khÃ¡c nhau cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c vÃ  giao tiáº¿p vá»›i nhau.
  - TÄƒng kháº£ nÄƒng sá»­ dá»¥ng láº¡i thÆ° viá»‡n vá»›i interface khÃ´ng thay Ä‘á»•i do khÃ´ng cÃ³ mÃ£ nguá»“n.
  - Táº¥t cáº£ cÃ¡c yÃªu cáº§u Ä‘Æ°á»£c chuyá»ƒn tiáº¿p, do Ä‘Ã³ lÃ m tÄƒng thÃªm má»™t Ã­t chi phÃ­.
  - ÄÃ´i khi cÃ³ quÃ¡ nhiá»u Adapter Ä‘Æ°á»£c thiáº¿t káº¿ trong má»™t chuá»—i Adapter (chain) trÆ°á»›c khi Ä‘áº¿n Ä‘Æ°á»£c yÃªu cáº§u thá»±c sá»±.
2. Bridge
- TÃ¡ch rá»i ngá»¯ nghÄ©a cá»§a má»™t váº¥n Ä‘á» khá»i viá»‡c cÃ i Ä‘áº·t, má»¥c Ä‘Ã­ch Ä‘á»ƒ cáº£ hai bá»™ pháº­n (ngá»¯ nghÄ©a vÃ  cÃ i Ä‘áº·t) cÃ³ thá»ƒ thay Ä‘á»•i Ä‘á»™c láº­p nhau.
- Táº§n suáº¥t sá»­ dá»¥ng: trung bÃ¬nh.






